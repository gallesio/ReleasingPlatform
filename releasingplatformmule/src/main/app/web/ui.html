<!DOCTYPE>
<html>
<head>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="jquery.jsonserialize.js"></script>
	
</head>
<body>
    <h2>User Interface - Entity Manager</h2>
    
	<form method="GET" id="listForm" action="http://localhost:8081/list">
    	<div id="description">List all the components of EM : </div>
    	<div id="list_resp"></div>
        <input type="submit" value="OK"/>
        
        <script type="text/javascript">
			$(document).ready(function(){
				$(('#listForm')).submit(function(event) {
					event.preventDefault();
					
					var $form = $(this),
						url = $form.attr("action");
					
					$.ajax({
						url: url,
						type: "GET"
					}).done(function (resp) {
						$('#list_resp').text(JSON.stringify(resp));
					});
				});
			});
		</script> 
    </form>
    
    <form method="GET" id="findForm" action="http://localhost:8081/find">
    	<div id="description">Find a component in list : </div>
    	<input type="text" id="id" name="id" value="10"></input>
    	<div id="find_resp"></div>
        <input type="submit" value="OK"/>
        
        <script type="text/javascript">
			$(document).ready(function(){
				$('#findForm').submit(function(event) {
					event.preventDefault();
					
					var $form = $(this),
						url = $form.attr("action"),
						variable = $form.serializeJSON(),
						json = JSON.stringify(variable),
						id_value = document.getElementById('id').value;
					
					alert("json = " + json);
					
					$.ajax({
						url: url,
						type: "GET",
						data: { id: id_value }

					}).done(function(resp) {
						$('#find_resp').text(JSON.stringify(resp));
					});
				});
			});
		</script> 
    </form>
    
	<form method="GET" id="createForm" action="http://localhost:8081/create">
    	<div id="description">Create a component in EM : </div>
    	<input type="text" id="name" value="component1"></input>
    	<input type="text" id="type" value="java"></input>
    	<input type="text" id="ref"  value="github"></input>
    	<div id="create_resp"></div>
        <input type="submit" value="OK"/>
        
        <script type="text/javascript">
			$(document).ready(function(){
				$('#createForm').submit(function(event) {
					event.preventDefault();
					
					var $form = $(this),
						url = $form.attr("action"),
						variable = $form.serializeJSON(),
						json = JSON.stringify(variable),
						name_value = document.getElementById('name').value,
						type_value = document.getElementById('type').value,
						ref_value  = document.getElementById('ref').value;
					
					$.ajax({
						url: url,
						type: "GET",
						data: { name: name_value,
								type: type_value,
								ref: ref_value
							  },
					}).done(function(resp) {
						$('#create_resp').text(JSON.stringify(resp));
					});
				});
			});
		</script>
    </form>

</body>
</html>